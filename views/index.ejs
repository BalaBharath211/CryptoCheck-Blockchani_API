<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Block Chain API</title>

  <link rel="stylesheet" href="styles/main.css">
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  >
</head>

<body>
  <%- include('partials/header.ejs') %>

  <div class="hero">
    <div class="her2">

      <h1 class="head">LIVE CRYPTOCURRENCY PRICES</h1>
      <h3 class="head">Check the latest cryptocurrency prices and market caps before you buy.</h3>
      <br><br>

      <h5 class="head2">ðŸ‘‡ Select Cryptocurrency</h5>

    <form action="/check-price" method="POST">

        <input
          type="text"
          name="cryptoSymbol"
          list="cryptoList"
          class="form-control mb-3"
          placeholder="Type or select crypto (e.g. BTC-USD)"
          required
        >

        <datalist id="cryptoList">
          <% symbols.forEach(symbol => { %>
            <option value="<%= symbol %>">
          <% }) %>
        </datalist>

        <button type="submit" class="btn btn-danger">
          Check Price
        </button>

      </form>

      <br>

      <% if (content) { %>
        <h3 class="data"><strong>Cryptocurrency Name:</strong> <%= cryptoName %></h3>
        <h3 class="data"><strong>Current Price:</strong> <%= content %></h3>
        <h3 class="data"><strong>24H Change:</strong> <%= percentage %></h3>
        <h3 class="data"><strong>24H Volume:</strong> <%= volume %></h3>
        <h3 class="data"><strong>Market Cap:</strong> <%= MarketCap %></h3>
      <% } %>

    </div>
  </div>
    <script>
      function filterSymbols(query) {
        const select = document.getElementById("cryptoSelect");
        const options = select.options;
        query = query.toUpperCase();

        for (let i = 0; i < options.length; i++) {
          const text = options[i].text.toUpperCase();
          options[i].style.display = text.includes(query) ? "" : "none";
        }
      }
    </script>

  <%- include('partials/footer.ejs') %>
</body>
</html>
